<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

	<context:annotation-config />
	<context:property-placeholder />
	<context:component-scan base-package="com.microsoft.azure.oidc" />

	<bean name="algorithmFactory"
		class="com.microsoft.azure.oidc.common.algorithm.impl.SpringAlgorithmFactory" />
	<bean name="issuerFactory"
		class="com.microsoft.azure.oidc.common.issuer.impl.SpringIssuerFactory" />
	<bean name="timeStampFactory"
		class="com.microsoft.azure.oidc.common.timestamp.impl.SpringTimeStampFactory" />
	<bean name="iDFactory"
		class="com.microsoft.azure.oidc.common.id.impl.SpringIDFactory" />
	<bean name="endPointFactory"
		class="com.microsoft.azure.oidc.configuration.endpoint.impl.SpringEndPointFactory" />
	<bean name="keyFactory"
		class="com.microsoft.azure.oidc.configuration.key.impl.SpringKeyFactory" />
	<bean name="keyNameFactory"
		class="com.microsoft.azure.oidc.configuration.key.name.impl.SpringKeyNameFactory" />
	<bean name="keyValueFactory"
		class="com.microsoft.azure.oidc.configuration.key.value.impl.SpringKeyValueFactory" />
	<bean name="keyExponentFactory"
		class="com.microsoft.azure.oidc.configuration.key.exponent.impl.SpringKeyExponentFactory" />
	<bean name="configurationFactory"
		class="com.microsoft.azure.oidc.configuration.impl.SpringConfigurationFactory" />
	<bean name="tokenFactory"
		class="com.microsoft.azure.oidc.token.impl.SpringTokenFactory" />
	<bean name="signatureFactory"
		class="com.microsoft.azure.oidc.token.signature.impl.SpringSignatureFactory" />
	<bean name="payloadFactory"
		class="com.microsoft.azure.oidc.token.payload.impl.SpringPayloadFactory" />
	<bean name="emailFactory"
		class="com.microsoft.azure.oidc.token.email.impl.SpringEmailFactory" />

	<bean name="applicationSettingsLoader"
		class="com.microsoft.azure.oidc.application.settings.impl.SpringApplicationSettingsLoader">
		<property name="iDFactory" ref="iDFactory" />
	</bean>
	<bean name="wellKnownLoader"
		class="com.microsoft.azure.oidc.openid.wellknown.impl.SpringWellKnownLoader">
		<property name="applicationSettingsLoader" ref="applicationSettingsLoader" />
	</bean>
	<bean name="keyStoreLoader"
		class="com.microsoft.azure.oidc.openid.keystore.impl.SpringKeyStoreLoader" />
	<bean name="configurationLoader"
		class="com.microsoft.azure.oidc.configuration.impl.SpringConfigurationLoader">
		<property name="wellKnownLoader" ref="wellKnownLoader" />
		<property name="wellKnownParser" ref="wellKnownParser" />
		<property name="keyStoreLoader" ref="keyStoreLoader" />
		<property name="keyStoreParser" ref="keyStoreParser" />
		<property name="configurationFactory" ref="configurationFactory" />
	</bean>

	<bean name="wellKnownParser"
		class="com.microsoft.azure.oidc.openid.wellknown.impl.SpringWellKnownParser">
		<property name="algorithmFactory" ref="algorithmFactory" />
		<property name="issuerFactory" ref="issuerFactory" />
		<property name="endPointFactory" ref="endPointFactory" />
	</bean>
	<bean name="keyStoreParser"
		class="com.microsoft.azure.oidc.openid.keystore.impl.SpringKeyStoreParser">
		<property name="keyFactory" ref="keyFactory" />
		<property name="keyNameFactory" ref="keyNameFactory" />
		<property name="keyValueFactory" ref="keyValueFactory" />
		<property name="keyExponentFactory" ref="keyExponentFactory" />
	</bean>
	<bean name="tokenParser" class="com.microsoft.azure.oidc.token.impl.SpringTokenParser">
		<property name="keyNameFactory" ref="keyNameFactory" />
		<property name="algorithmFactory" ref="algorithmFactory" />
		<property name="timeStampFactory" ref="timeStampFactory" />
		<property name="emailFactory" ref="emailFactory" />
		<property name="issuerFactory" ref="issuerFactory" />
		<property name="iDFactory" ref="iDFactory" />
		<property name="payloadFactory" ref="payloadFactory" />
		<property name="signatureFactory" ref="signatureFactory" />
		<property name="tokenFactory" ref="tokenFactory" />
	</bean>

	<bean name="tokenValidator"
		class="com.microsoft.azure.oidc.token.impl.SpringTokenValidator">
		<property name="applicationSettingsLoader" ref="applicationSettingsLoader" />
		<property name="configurationLoader" ref="configurationLoader" />
		<property name="timeStampFactory" ref="timeStampFactory" />
	</bean>

	<bean name="authenticationFilter" class="com.microsoft.azure.oidc.AuthenticationFilter">
		<property name="applicationSettingsLoader" ref="applicationSettingsLoader" />
		<property name="configurationLoader" ref="configurationLoader" />
		<property name="tokenParser" ref="tokenParser" />
		<property name="tokenValidator" ref="tokenValidator" />
	</bean>
</beans>
